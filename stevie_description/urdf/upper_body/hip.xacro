<?xml version="1.0"?>
<robot  xmlns:xacro="http://ros.org/wiki/xacro">

	<xacro:include filename="$(find stevie_description)/urdf/upper_body/upper_body.transmission.xacro" />

	<!-- DECLARE VARIABLES -->
	<xacro:property name="hip_mass" value="0.5"/>
	<xacro:property name="hip_volume" value="0.001004"/>
	<xacro:property name="hip_length" value="0.320"/>
	<xacro:property name="hip_width" value="0.095"/>
	<xacro:property name="hip_height" value="0.3"/>

	<xacro:property name="hip_center_of_mass" value="0 0 -0.056289"/>

	<xacro:property name="hip_x_adjustment" value="-0.135"/>
	<xacro:property name="hip_z_adjustment" value="0.44"/>

	<xacro:property name="PI" value="3.14159"/>

	<!--************************        HIP          ************************-->
  <xacro:macro name="hip" params="parent" >

		<!-- hip link -->
		<link name="hip_link">
			<collision>
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<geometry>
					<mesh filename="package://stevie_description/meshes/collision/hip_upper_collision.stl" scale="0.001 0.001 0.001"/>
				</geometry>
			</collision>
			<visual>
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<geometry>
			 		<mesh filename="package://stevie_description/meshes/visual/hip_upper.stl" scale="0.001 0.001 0.001"/>
				</geometry>
			</visual>
			<inertial>
				<origin xyz="${hip_center_of_mass}" rpy="0 0 0"/>
				<mass value="${hip_mass}"/>
				<xacro:scale_inertia m="${hip_mass}" v="${hip_volume}" ixx="0.0000090965" ixy="0" ixz="0" iyy="0.0000064837" iyz="0" izz="0.0000148569"/>
			</inertial>
		</link>

		<gazebo reference="hip_link">
			<mu1>1.0</mu1>
			<mu2>1.0</mu2>
			<maxVel>0</maxVel>
			<material>Gazebo/White</material>
		</gazebo>

		<!-- lower_body-hip joint -->
		<joint name="lower_body_hip_joint" type="revolute">
			<origin xyz="${hip_x_adjustment} 0 ${hip_z_adjustment}" rpy="0 0 0"/>
			<axis xyz="0 0 1"/>
			<limit lower="${-PI/4}" upper="${PI/4}" effort="1000.0" velocity="0.5"/>
			<parent link="${parent}"/>
			<child link="hip_link"/>
      <dynamics damping="10" friction="0.5"/>
		</joint>

		<!-- transmission -->
		<xacro:hip_transmission/>

	</xacro:macro>
	<!--***********************************************************************-->

</robot>
