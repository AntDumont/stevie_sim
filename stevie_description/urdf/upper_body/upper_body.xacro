<?xml version="1.0"?>
<robot  xmlns:xacro="http://ros.org/wiki/xacro">

	<xacro:include filename="$(find stevie_description)/urdf/upper_body/upper_body.transmission.xacro" />

	<xacro:include filename="$(find stevie_description)/urdf/upper_body/hip.xacro" />

	<!-- DECLARE VARIABLES -->
	<xacro:property name="upper_body_mass" value="8"/>
	<xacro:property name="upper_body_volume" value="0.010712"/>
	<xacro:property name="upper_body_length" value="0.347374786"/>
	<xacro:property name="upper_body_width" value="0.283975830"/>
	<xacro:property name="upper_body_height" value="0.565"/>

	<xacro:property name="upper_body_center_of_mass" value="0.000090 0 0.390377"/>

	<xacro:property name="PI" value="3.14159"/>

	<!--************************        UPPER BODY          ************************-->
  <xacro:macro name="upper_body" params="parent name" >

		<!-- upper body link -->
		<link name="${name}_link">
			<collision>
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<geometry>
					<mesh filename="package://stevie_description/meshes/collision/upper_body_collision.STL" scale="0.001 0.001 0.001"/>
				</geometry>
			</collision>
			<visual>
				<origin xyz="0 0 0" rpy="0 0 0"/>
					<geometry>
				 		<mesh filename="package://stevie_description/meshes/visual/upper_body.STL" scale="0.001 0.001 0.001"/>
					</geometry>
			</visual>
			<inertial>
				<origin xyz="${upper_body_center_of_mass}" rpy="0 0 0"/>
				<mass value="${upper_body_mass}"/>
				<xacro:scale_inertia m="${upper_body_mass}" v="${upper_body_volume}" ixx="0.0001825920" ixy="0" ixz="0" iyy="0.0001372321" iyz="0" izz="0.0001830431"/>
			</inertial>
		</link>

		<gazebo reference="${name}_link">
			<mu1>1.0</mu1>
			<mu2>1.0</mu2>
			<maxVel value="0"/>
			<material>Gazebo/White</material>
		</gazebo>

		<!-- hip -->
		<xacro:hip parent="${parent}"/>

		<!-- hip-upper_body joint -->
		<joint name="hip_${name}_joint" type="revolute">
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<axis xyz="0 1 0"/>
			<limit lower="-${PI/6}" upper="${PI/6}" effort="1000.0" velocity="0.5"/>
			<parent link="hip_link"/>
			<child link="${name}_link"/>
      <joint_properties damping="10" friciton="0.5"/>
		</joint>

		<!-- transmission -->
		<xacro:upper_body_transmission name="${name}"/>

	</xacro:macro>
	<!--***********************************************************************-->

</robot>
